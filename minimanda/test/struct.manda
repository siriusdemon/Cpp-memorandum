(defmacro ASSERT (actual expected)
  (assert actual expected (str expected)))

(defstruct My gender int age int)
(defstruct Man age int)

(defunion U1 
    gender int 
    X Man)

(defunion U2
    X int
    Y My)

(def main() -> int
    (ASSERT 42 42)
    (ASSERT 12 (do
                (let a :My) 
                (set a.gender 1)
                (set a.age 12)
                a.age))
    (ASSERT 1 (do
                (let a :Man)
                (set a.age 10)
                (defstruct Man gender int)
                (let b: Man)
                (set b.gender 1)
                b.gender))
    (ASSERT 10 (do
                (let a : U1)
                (set a.X.age 10)
                a.gender))
    (ASSERT 100 (do
                (let a : U2)
                (set a.X 100)
                a.Y.gender))
    0
)